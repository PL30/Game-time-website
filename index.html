<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Game Time - Book Your Spot</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-blue-600 text-white p-6">
    <h1 class="text-3xl font-bold">Game Time Helsinki</h1>
    <p class="text-sm mt-2">Book football games. Show up. Play. Simple.</p>
  </header>

  <section class="p-6">
    <h2 class="text-xl font-semibold mb-4">Upcoming Games</h2>
    <div class="grid gap-4 md:grid-cols-2">
      <div class="bg-white p-4 rounded-xl shadow">
        <h3 class="text-lg font-bold">7v7 @ Töölö | Wed, 6pm</h3>
        <p class="text-sm mt-1 text-gray-600">Töölön Pallokenttä 1</p>
        <p class="text-sm mt-1">Players Registered: <span class="font-semibold" id="registered-count">12</span>/14</p>
        <p class="text-sm mt-1">Status: <span class="font-semibold" id="game-status">Game Confirmed!</span></p>

        <div class="mt-3 space-y-2">
          <input type="text" id="player-name" placeholder="First Name" class="p-2 border rounded w-full" />
          <input type="text" id="player-identifier" placeholder="Email or Phone" class="p-2 border rounded w-full" />
          <input type="text" id="player-position" placeholder="Position (e.g. Midfielder)" class="p-2 border rounded w-full" />
          <select id="player-experience" class="p-2 border rounded w-full">
            <option value="Beginner">Beginner</option>
            <option value="Intermediate">Intermediate</option>
            <option value="Advanced">Advanced</option>
          </select>
          <button onclick="reserveSpot()" class="bg-blue-600 text-white py-2 w-full rounded">Reserve My Spot</button>
          <button onclick="unreserveSpot()" class="bg-red-500 text-white py-2 w-full rounded">Cancel My Spot</button>
        </div>

        <div class="mt-4">
          <h4 class="font-semibold mb-2">Registered Players:</h4>
          <ul id="registered-names" class="list-disc list-inside text-sm"></ul>
        </div>

        <div class="mt-4">
          <a href="#" class="inline-block bg-green-500 text-white px-4 py-2 rounded" target="_blank">Pay with Stripe (Coming Soon)</a>
        </div>

        <div class="mt-4 text-sm">
          <a href="#" onclick="showAdminLogin()" class="text-blue-600 underline">Admin Login</a>
          <div id="admin-controls" style="display:none;" class="mt-2">
            <input type="password" id="admin-password" placeholder="Enter Admin Password" class="p-2 border rounded w-full mb-2" />
            <button onclick="verifyAdmin()" class="bg-gray-700 text-white px-4 py-2 rounded w-full">Submit</button>
            <div id="admin-panel" style="display:none;">
              <h4 class="font-semibold mt-4">Admin Controls</h4>
              <button onclick="resetGame()" class="mt-2 bg-gray-700 text-white px-4 py-2 rounded">Reset Game</button>
              <p class="mt-2 text-sm text-gray-600">WhatsApp: <a href="https://wa.me/358401234567" class="text-blue-500 underline" target="_blank">Message Us</a></p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <section class="p-6 mt-8">
    <h2 class="text-xl font-semibold mb-2">How It Works</h2>
    <ol class="list-decimal list-inside space-y-2 text-sm">
      <li>Choose a game and book your spot</li>
      <li>Once minimum players join (e.g., 12/14), the game is confirmed</li>
      <li>If the game is cancelled, you get an automatic refund</li>
    </ol>
  </section>

  <section class="p-6 mt-8 bg-white">
    <h2 class="text-xl font-semibold mb-2">Join Our Community</h2>
    <p class="text-sm mb-4">Follow us for updates and more games!</p>
    <div class="flex space-x-4">
      <a href="https://www.instagram.com/game_time_footy/" target="_blank" class="text-blue-500 underline">Instagram</a>
      <a href="https://www.facebook.com/profile.php?id=61578184484693" target="_blank" class="text-blue-500 underline">Facebook</a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSdkHADEb7-xgjajXy7kbAOLg4uiljm0dQvJ5KOanMmRklu7HA/viewform?usp=sharing&ouid=105156732411270285549" target="_blank" class="text-green-600 underline">Complete Our Survey</a>
    </div>
  </section>

  <footer class="p-6 text-center text-xs text-gray-500">
    &copy; 2025 Game Time Helsinki. Built with no-code tools.
  </footer>

  <script>
    const maxPlayers = 14;
    let registered = 12;
    const players = [
      { name: "Alex", identifier: "alex@example.com" },
      { name: "Sam", identifier: "sam@example.com" },
      { name: "Jamie", identifier: "jamie@example.com" }
    ];

    const registeredCount = document.getElementById('registered-count');
    const status = document.getElementById('game-status');
    const registeredNames = document.getElementById('registered-names');

    function updateRegisteredList() {
      registeredNames.innerHTML = '';
      players.forEach(p => {
        const li = document.createElement('li');
        li.textContent = p.name;
        registeredNames.appendChild(li);
      });
    }

    function reserveSpot() {
      const name = document.getElementById('player-name').value.trim();
      const identifier = document.getElementById('player-identifier').value.trim();
      const position = document.getElementById('player-position').value.trim();
      const experience = document.getElementById('player-experience').value;

      if (!name || !identifier) {
        alert("Please enter your name and email/phone.");
        return;
      }

      if (registered < maxPlayers) {
        players.push({ name, identifier, position, experience });
        registered++;
        registeredCount.textContent = registered;
        updateStatus();
        updateRegisteredList();
        alert("Spot reserved! We'll send confirmation soon.");
      } else {
        alert("Game is full. Join the waitlist!");
      }
    }

    function unreserveSpot() {
      const identifier = document.getElementById('player-identifier').value.trim();
      if (!identifier) {
        alert("Please enter your email or phone number.");
        return;
      }

      const now = new Date();
      const gameTime = new Date();
      gameTime.setHours(18, 0, 0, 0);

      const cutoff = new Date(gameTime);
      cutoff.setDate(cutoff.getDate() - 1);

      const index = players.findIndex(p => p.identifier === identifier);

      if (index === -1) {
        alert("No reservation found with that email/phone.");
        return;
      }

      if (now < cutoff && registered > 0) {
        players.splice(index, 1);
        registered--;
        registeredCount.textContent = registered;
        updateStatus();
        updateRegisteredList();
        alert("Your spot has been canceled.");
      } else {
        alert("You can't cancel within 24 hours of the game.");
      }
    }

    function updateStatus() {
      if (registered >= 12) {
        status.textContent = "Game Confirmed!";
      } else {
        status.textContent = `Confirmed if ${12 - registered} more register`;
      }
    }

    function resetGame() {
      registered = 0;
      players.length = 0;
      updateStatus();
      updateRegisteredList();
      registeredCount.textContent = registered;
    }

    function showAdminLogin() {
      document.getElementById('admin-controls').style.display = 'block';
    }

    function verifyAdmin() {
      const password = document.getElementById('admin-password').value;
      if (password === 'ColePalmerCWC') {
        document.getElementById('admin-panel').style.display = 'block';
      } else {
        alert('Incorrect password.');
      }
    }

    updateRegisteredList();
  </script>
</body>
</html>
